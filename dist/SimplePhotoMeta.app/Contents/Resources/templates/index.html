<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Photo Meta</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <h1 class="app-title">Simple Photo Meta</h1>
                <span class="app-version">(alpha)</span>
            </div>
            <div class="header-right">
                <button id="btn-open-folder" class="btn btn-primary">Open Folder</button>
                <button id="btn-preferences" class="btn">Preferences</button>
                <button id="btn-about" class="btn">About</button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Left Panel: Thumbnail Grid -->
            <section class="panel panel-left" id="panel-left">
                <div class="panel-header">
                    <div class="folder-info">
                        <span id="current-folder">No folder selected</span>
                        <span id="image-count"></span>
                    </div>
                    <div class="search-bar">
                        <input type="text" id="search-input" placeholder="Search by tag..." />
                        <button id="btn-search" class="btn btn-small">Search</button>
                        <button id="btn-clear-search" class="btn btn-small">Clear</button>
                    </div>
                </div>
                
                <div id="thumbnail-grid" class="thumbnail-grid">
                    <p class="empty-state">Open a folder to view images</p>
                </div>
                
                <div class="pagination">
                    <button id="btn-prev-page" class="btn btn-small" disabled>‚Üê Previous</button>
                    <span id="page-info">Page 1 of 1</span>
                    <button id="btn-next-page" class="btn btn-small" disabled>Next ‚Üí</button>
                </div>
                
                <!-- Scan Progress -->
                <div id="scan-progress" class="scan-progress hidden">
                    <div class="progress-bar">
                        <div id="progress-fill" class="progress-fill"></div>
                    </div>
                    <span id="scan-status">Scanning...</span>
                </div>
            </section>

            <!-- Horizontal Resize Handle -->
            <div class="resize-handle resize-handle-horizontal" id="resize-handle-h"></div>

            <!-- Right Panel: Image Preview & Metadata Editor -->
            <section class="panel panel-right" id="panel-right">
                <!-- Image Preview -->
                <div class="preview-container" id="preview-container">
                    <div id="image-preview" class="image-preview" title="Click to open in system viewer">
                        <p class="empty-state">Select an image to preview</p>
                        <div class="preview-controls" id="preview-controls" style="display: none;">
                            <button id="btn-rotate-left" title="Rotate Left">‚Ü∂</button>
                            <button id="btn-rotate-right" title="Rotate Right">‚Ü∑</button>
                        </div>
                    </div>
                    <div id="image-info" class="image-info hidden">
                        <span id="image-filename"></span>
                    </div>
                </div>

                <!-- Vertical Resize Handle -->
                <div class="resize-handle resize-handle-vertical" id="resize-handle-v"></div>

                <!-- Metadata Editor -->
                <div class="metadata-editor">
                    <div class="editor-header">
                        <div class="selector-group">
                            <label for="metadata-type">Type:</label>
                            <select id="metadata-type" class="select">
                                <option value="iptc">IPTC</option>
                                <option value="exif">EXIF</option>
                            </select>
                        </div>
                        <div class="selector-group">
                            <label for="tag-type">Field:</label>
                            <select id="tag-type" class="select">
                                <option value="">Select a field...</option>
                            </select>
                        </div>
                    </div>

                    <!-- Tag Input -->
                    <div class="tag-input-container">
                        <input type="text" id="tag-input" placeholder="Add a tag..." disabled />
                        <button id="btn-add-tag" class="btn btn-primary" disabled>Add</button>
                        <!-- Autocomplete Suggestions -->
                        <div id="tag-suggestions" class="tag-suggestions hidden"></div>
                    </div>

                    <!-- Current Tags -->
                    <div id="tag-list" class="tag-list">
                        <p class="empty-state">No tags</p>
                    </div>

                    <!-- Save Status (auto-saves on add/remove) -->
                    <div class="editor-actions">
                        <span id="save-status" class="save-status"></span>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Preferences Dialog -->
    <dialog id="preferences-dialog" class="dialog">
        <h2>Preferences</h2>
        <div class="dialog-content">
            <div class="form-group">
                <label for="pref-font-size">Font Size:</label>
                <select id="pref-font-size" class="select">
                    <option value="10">Small</option>
                    <option value="12" selected>Medium</option>
                    <option value="14">Large</option>
                    <option value="16">Extra Large</option>
                    <option value="18">Massive</option>
                </select>
            </div>
        </div>
        <div class="dialog-actions">
            <button id="btn-save-prefs" class="btn btn-primary">Save</button>
            <button id="btn-close-prefs" class="btn">Cancel</button>
        </div>
    </dialog>

    <!-- About Dialog -->
    <dialog id="about-dialog" class="dialog">
        <h2>About Simple Photo Meta</h2>
        <div class="dialog-content">
            <p><strong>Version:</strong> 0.1.0 (alpha)</p>
            <p>A tool for editing IPTC and EXIF metadata in images.</p>
            <p><strong>Copyright:</strong> ¬© 2025 Dan Bright</p>
            <p><strong>License:</strong> GNU General Public License v3.0</p>
        </div>
        <div class="dialog-actions">
            <button id="btn-close-about" class="btn btn-primary">Close</button>
        </div>
    </dialog>

    <!-- Folder Browser Dialog -->
    <dialog id="folder-dialog" class="dialog dialog-large">
        <h2>Select Folder</h2>
        <div class="dialog-content">
            <div class="folder-browser-header">
                <button id="btn-folder-up" class="btn btn-small">‚Üë Up</button>
                <button id="btn-folder-home" class="btn btn-small">üè† Home</button>
                <span id="folder-current-path" class="folder-current-path">/</span>
            </div>
            <div id="folder-list" class="folder-list">
                <p class="loading">Loading...</p>
            </div>
            <div class="folder-info-bar">
                <span id="folder-image-count"></span>
            </div>
        </div>
        <div class="dialog-actions">
            <button id="btn-select-folder" class="btn btn-primary">Open This Folder</button>
            <button id="btn-cancel-folder" class="btn">Cancel</button>
        </div>
    </dialog>

    <script src="/static/js/api.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>
